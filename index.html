    <!doctype html>
    <html lang="fr">
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Escalier Novo</title>
    <style>
        body {
        margin: 0;
        font-family: "Segoe UI", Arial, sans-serif;
        background: #f6f6f6;
        color: #222;
        padding-bottom: 30px;
        }

        h1 {
        text-align: center;
        font-size: 2.2rem;
        margin: 24px 0 12px;
        color: #333;
        letter-spacing: 1px;
        }

        #videos-container {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(2, auto);
        gap: 12px;
        max-width: 1200px;
        margin: 0 auto 20px;
        padding: 16px;
        box-sizing: border-box;
        }

        .video-card {
        background: white;
        border-radius: 12px;
        padding: 8px;
        box-shadow: 0 4px 12px rgba(16, 24, 40, 0.06);
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        }

        video {
        width: 100%;
        aspect-ratio: 16/9;
        border-radius: 8px;
        background: #000;
        cursor: pointer;
        object-fit: cover;
        }

        video::-webkit-media-controls,
        video::-moz-media-controls,
        video::-ms-media-controls {
        display: none !important;
        }

        .counter {
        margin-top: 6px;
        font-weight: bold;
        font-size: 1rem;
        }

        .label {
        font-weight: bold;
        margin-bottom: 6px;
        font-size: 1rem;
        }

        /* ===== POPUP ===== */
        #winner-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.8);
        background: rgba(255, 255, 255, 0.95);
        padding: 40px 60px;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        font-size: 2rem;
        text-align: center;
        z-index: 1000;
        opacity: 0;
        transition: all 0.4s ease;
        }

        #winner-popup.show {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
        }

        /* ===== CONTENEUR DE QUESTIONS (MIS À JOUR) ===== */
        #question-section {
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
        }

        #question-header {
        font-size: 1.4rem;
        color: #5a7d9a;
        margin-bottom: 10px;
        font-weight: 600;
        }

        #current-question {
        font-size: 1.6rem;
        color: #333;
        font-weight: bold;
        min-height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: opacity 0.3s ease;
        margin-bottom: 15px; /* Ajout d'espace avant les réponses */
        }
        
        /* NOUVEAU: Style pour les réponses */
        #answer-options {
        display: grid;
        grid-template-columns: 1fr 1fr; /* 2 colonnes */
        gap: 10px;
        margin-top: 10px;
        transition: opacity 0.3s ease; /* Animation de fondu */
        }

        .answer-option {
        background: #f0f4f8;
        padding: 12px;
        border-radius: 8px;
        font-size: 1.1rem;
        color: #2c3e50;
        text-align: left; /* Aligner le texte des réponses à gauche */
        padding-left: 15px;
        }

        #nav-info {
        margin-top: 20px; /* Augmentation de la marge */
        color: #777;
        font-size: 0.9rem;
        }
    </style>
    </head>
    <body>

    <div id="videos-container"></div>

    <div id="question-section">
        <div id="question-header">Question Actuelle</div>
        <div id="current-question"></div>
        
        <div id="answer-options"></div>

    </div>

    <div id="winner-popup"></div>

<script>
    const keys = 'azertyui'.split('');
    const videosContainer = document.getElementById('videos-container');
    const popup = document.getElementById('winner-popup');
    const questionDisplay = document.getElementById('current-question');
    const answerOptionsContainer = document.getElementById('answer-options'); 
    const videos = [];
    let winnerDeclared = false; 

    let buzzedPlayer = null; 
    let isQuestionActive = true; 

    // Définition des sources de vidéo
    const VIDEO_UP = "animeup.mp4"; // Vidéo de progression (bonne réponse)
    const VIDEO_DOWN = "animebas.mp4"; // Vidéo de perte (mauvaise réponse)
    
    const questions = [
      {
        question: "Quelle est la capitale de l'Australie ?",
        answers: ["Sydney", "Melbourne", "Canberra", "Brisbane"],
        correctIndex: 2 
      },
      {
        question: "Combien de côtés possède un hexagone ?",
        answers: ["5", "6", "7", "8"],
        correctIndex: 1 
      },
      {
        question: "Qui a peint La Joconde ?",
        answers: ["Michel-Ange", "Raphaël", "Léonard de Vinci", "Donatello"],
        correctIndex: 2 
      },
      {
        question: "Quel est le plus grand océan du monde ?",
        answers: ["Atlantique", "Indien", "Arctique", "Pacifique"],
        correctIndex: 3 
      },
      {
        question: "Quel est le symbole chimique de l'eau ?",
        answers: ["O2", "CO2", "H2O", "N2"],
        correctIndex: 2 
      },
      {
        question: "Dans quel pays se trouve le Mont Fuji ?",
        answers: ["Chine", "Japon", "Corée du Sud", "Vietnam"],
        correctIndex: 1 
      },
      {
        question: "Qui a écrit 'Les Misérables' ?",
        answers: ["Alexandre Dumas", "Victor Hugo", "Émile Zola", "Gustave Flaubert"],
        correctIndex: 1 
      },
      {
        question: "Gaz le plus abondant dans l'atmosphère terrestre ?",
        answers: ["Oxygène", "Azote", "Dioxyde de carbone", "Argon"],
        correctIndex: 1 
      },
      {
        question: "Nom de la galaxie où se situe la Terre ?",
        answers: ["Andromède", "Le Sombrero", "La Voie Lactée", "Le Tourbillon"],
        correctIndex: 2 
      },
      {
        question: "Combien de doigts a la main de Mickey Mouse ?",
        answers: ["3", "4", "5", "6"],
        correctIndex: 1 
      }
    ];
    let currentQuestionIndex = 0;
    const answerPrefixes = ['A', 'B', 'C', 'D']; 

    /**
     * Change la source de la vidéo et la démarre.
     * @param {HTMLVideoElement} videoEl L'élément vidéo.
     * @param {string} newSrc Le chemin du nouveau fichier vidéo.
     */
    function setVideoSourceAndPlay(videoEl, newSrc) {
        // Vérifie si la source a changé.
        if (videoEl.querySelector('source').getAttribute('src') !== newSrc) {
            videoEl.querySelector('source').setAttribute('src', newSrc);
            videoEl.load(); // Recharge la vidéo avec la nouvelle source
        }
        
        if (videoEl.ended) videoEl.currentTime = 0;
        videoEl.play().catch(() => {});
    }

    // FONCTION MODIFIÉE : pour valider la réponse du joueur qui a buzzé
    function validateAnswer(playerIndex, answerIndex) {
        if (buzzedPlayer === playerIndex) {
            const currentData = questions[currentQuestionIndex];
            const isCorrect = answerIndex === currentData.correctIndex;
            const videoEl = videos[playerIndex].video;

            if (isCorrect) {
                // ✅ BONNE RÉPONSE : Jouer la vidéo de montée (animeup.mp4)
                setVideoSourceAndPlay(videoEl, VIDEO_UP);
                
                // Monte d'un étage
                updateCount(playerIndex, true);
                showWinnerPopup(`✅ Joueur ${playerIndex + 1} a bien répondu ! (+1 étage)`);
            } else {
                // ❌ MAUVAISE RÉPONSE : Jouer la vidéo de descente (animebas.mp4)
                setVideoSourceAndPlay(videoEl, VIDEO_DOWN);
                
                showWinnerPopup(`❌ Joueur ${playerIndex + 1} s'est trompé. Question terminée.`);
            }

            // On passe à la question suivante après un petit délai
            setTimeout(nextQuestion, 2000); 
        }
    }


    // Fonction pour afficher la question ET les réponses
    function displayQuestion() {
      answerOptionsContainer.innerHTML = ''; 
      buzzedPlayer = null; 
      isQuestionActive = true; 

      if (currentQuestionIndex < questions.length) {
        const currentData = questions[currentQuestionIndex];
        
        questionDisplay.textContent = currentData.question;
        
        currentData.answers.forEach((answer, index) => {
          const answerEl = document.createElement('div');
          answerEl.className = 'answer-option';
          answerEl.id = `answer-option-${index}`;
          answerEl.textContent = `${answerPrefixes[index]}. ${answer}`; 
          answerOptionsContainer.appendChild(answerEl);
        });

      } else {
        questionDisplay.textContent = "FIN : Plus de questions disponibles !";
        isQuestionActive = false; 
      }
    }

    // Fonction pour passer à la question suivante
    function nextQuestion() {
      // Désactiver le buzz pour la transition
      isQuestionActive = false; 

      if (currentQuestionIndex < questions.length) { 
        // Appliquer une animation de fondu
        questionDisplay.style.opacity = 0;
        answerOptionsContainer.style.opacity = 0; 
        
        setTimeout(() => {
          currentQuestionIndex++;
          displayQuestion();
          questionDisplay.style.opacity = 1;
          answerOptionsContainer.style.opacity = 1; 
        }, 300);
      }
    }

    // Afficher le popup central
    function showWinnerPopup(text) {
      popup.textContent = text;
      popup.classList.add('show');
      setTimeout(() => popup.classList.remove('show'), 2000); 
    }

    // Fonction de mise à jour du compteur
    function updateCount(playerIndex, isQuizWin = false) {
      const videoData = videos[playerIndex];
      
      if (isQuizWin) { 
          videoData.clickCount += 1;
      } 

      videoData.countEl.textContent = videoData.clickCount;
      
      if (videoData.clickCount >= 10 && !winnerDeclared) {
        winnerDeclared = true;
        showWinnerPopup(`🏆 Joueur ${playerIndex + 1} est arrivé premier !`);
        isQuestionActive = false; 
      }
    }

    // Création des 8 vidéos
    keys.forEach((key, index) => {
      const section = document.createElement('div');
      section.className = 'video-card';
      // NOTE: La balise <video> contient une balise <source> pour faciliter le changement de source par JS
      section.innerHTML = `
        <div class="label">Joueur ${index + 1}</div>
        <video id="video${index}" preload="metadata" playsinline webkit-playsinline>
          <source src="${VIDEO_UP}" type="video/mp4">
        </video>
        <div class="counter">Étage = <span id="count${index}">0</span></div>
      `;
      videosContainer.appendChild(section);

      const videoEl = section.querySelector('video');
      const countEl = section.querySelector(`#count${index}`);
      let clickCount = 0;

      // Le clic sur la vidéo ne sert qu'à PAUSER/JOUER manuellement
      videoEl.addEventListener('click', () => {
        if (!isQuestionActive) {
            if (videoEl.paused || videoEl.ended) {
                videoEl.play().catch(() => {});
            } else {
                videoEl.pause();
            }
        }
      });

      videos.push({ key, video: videoEl, clickCount, countEl, playerIndex: index });
    });

    // Contrôle via clavier
    window.addEventListener('keydown', (e) => {
      const pressedKey = e.key.toLowerCase();
      const videoObj = videos.find(v => v.key === pressedKey);
      
      // 1. Bouton "Suivant" (N)
      if (pressedKey === 'n') {
        e.preventDefault();
        if (buzzedPlayer !== null) {
            showWinnerPopup(`⏳ Joueur ${buzzedPlayer + 1} n'a pas répondu. Question suivante.`);
        }
        nextQuestion();
        return;
      }
      
      // 2. Boutons de Réponse (1, 2, 3, 4) 
      const answerKeys = ['1', '2', '3', '4'];
      const answerIndex = answerKeys.indexOf(pressedKey);
      
      if (answerIndex !== -1 && buzzedPlayer !== null) {
          e.preventDefault();
          validateAnswer(buzzedPlayer, answerIndex);
          return;
      }

      // 3. Boutons de Buzz (a, z, e, r, t, y, u, i)
      if (videoObj && isQuestionActive && buzzedPlayer === null) {
        e.preventDefault();
        
        // C'est le BUZZ !
        buzzedPlayer = videoObj.playerIndex;
        isQuestionActive = false; 
        
        // Afficher la pop-up
        showWinnerPopup(`🚨 Joueur ${buzzedPlayer + 1} a buzzé !`);

        // Afficher l'instruction de réponse dans la section question
        questionDisplay.textContent = `${questions[currentQuestionIndex].question} (Joueur ${buzzedPlayer + 1} répond)`;
        
      } 
    });

    // Initialisation
    window.onload = displayQuestion;
    </script>
    </body>
    </html>